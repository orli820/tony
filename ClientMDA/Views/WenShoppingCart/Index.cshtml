@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_WenLayout.cshtml";
}
<style>
    .text-6:hover {
        /*box-shadow: 0 10px;*/
        padding-bottom: 20px;
        margin: 10px;
        padding: 10px;
        text-decoration: none;
        border-bottom: 5px #00ffff solid;
    }
    .text-6 {
        /*box-shadow: 0 10px;*/
        padding-bottom: 20px;
        margin: 10px;
        padding: 10px;
        text-decoration: none;
    }

    a:hover {
        text-decoration: none;
        border-bottom: 2px #0094ff solid;
    }
</style>
<div style="display:block;height:40px;"></div>
@*上面的廣告*@
<div class="container">
    <div id="carousel1" class="carousel slide" data-interval="5000" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carousel1" data-slide-to="0" class="active"></li>
            <li data-target="#carousel1" data-slide-to="0"></li>
            <li data-target="#carousel1" data-slide-to="0"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100 rounded" src="~/images/WenProduct/bg04.jpg" alt="Fist slide" />
            </div>
            <div class="carousel-item">
                <img class="d-block w-100 rounded" src="~/images/WenProduct/bg05.jpg" alt="Second side" />
            </div>
            <div class="carousel-item">
                <img class="d-block w-100 rounded" src="~/images/WenProduct/bg06.jpg" alt="Second side" />
            </div>
        </div>
        <a style="border-bottom:none" class="carousel-control-prev" href="#carousel1" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a style="border-bottom:none" class="carousel-control-next" href="#carousel1" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>
</div>
@*上面的廣告*@

<div style="display:block;height:40px;"></div>
<div class="container">
    <div class="row">
        <div class="col-7"></div>
        <div class="col-5">
            <select id="select1" class="form-select text-white bg-success bg-opacity-50">
                <option>請選擇電影院</option>
            </select>
        </div>
    </div>
</div>
<div style="display:block;height:40px;"></div>

@*電影院產品類別*@
<div class="container">
    <ul id="u1" class="nav nav-tabs">
    </ul>
    <div style="display:block;height:20px;"></div>
    <div class="tab-content">
        <div class="tab-pane fade show active pt-2" id="item0">
            <div class="container">
                <ul class="list-unstyled text-success">
                    <li class="media p-3">
                        <img src="~/images/WenProduct/434d3ebf-c5e5-4d01-a9ff-4f6ca4f68a23.jpg" class=" w-25 mr-3 img-thumbnail img-fluid" />
                        <div class="media-body">
                            <h4> productName0</h4>
                            <p><i class="fa-solid fa-sign-hanging"></i>price、category、introduce</p>
                            <a href="#" class="btn btn-outline-success">加入購物車</a>
                        </div>
                    </li>
                </ul>
                @*加入選擇頁*@
                <div class="container">
                    <ul class="pagination">
                        <li class="page-item">
                            <a href="#" class="page-link">&laquo;</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">1</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">2</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">3</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">&raquo;</a>
                        </li>
                    </ul>
                </div>
                @*加入選擇頁*@
            </div>
        </div>

        <div class="tab-pane fade show pt-2" id="item1">
            <div class="container">
                <ul class="list-unstyled text-success">
                    <li class="media p-3">
                        <img src="~/images/WenProduct/44e66c73-2700-4ccc-bc88-cd28caf9866e.jpg" class=" w-25 mr-3 img-thumbnail img-fluid" />
                        <div class="media-body">
                            <h4> productName1</h4>
                            <p>price、category、introduce</p>
                            <a href="#" class="btn btn-outline-success">加入購物車</a>
                        </div>
                    </li>
                    <li class="media p-3">
                        <img src="~/images/WenProduct/44e66c73-2700-4ccc-bc88-cd28caf9866e.jpg" class=" w-25 mr-3 img-thumbnail img-fluid" />
                        <div class="media-body">
                            <h4> productName</h4>
                            <p>price、category、introduce</p>
                            <a href="#" class="btn btn-outline-success">加入購物車</a>
                        </div>
                    </li>
                </ul>
                @*加入選擇頁*@
                <div class="container">
                    <ul class="pagination">
                        <li class="page-item">
                            <a href="#" class="page-link">&laquo;</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">1</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">2</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">3</a>
                        </li>
                        <li class="page-item">
                            <a href="#" class="page-link">&raquo;</a>
                        </li>
                    </ul>
                </div>
                @*加入選擇頁*@
            </div>
        </div>

        <div class="tab-pane fade pt-2" id="item2">
            <div class="container">
                <ul class="list-unstyled text-success">
                    <li class="media p-3">
                        <img src="~/images/WenProduct/1ad59c38-afe6-4994-bfdf-a1b8422aecfb.jpg" class="w-25 mr-3 img-thumbnail img-fluid" />
                        <div class="media-body">
                            <h4> MyItem2</h4>
                            <p>price、category、introduce</p>
                            <a href="#" class="btn btn-outline-success">加入購物車</a>
                        </div>
                    </li>
                </ul>
            </div>

        </div>
    </div>
</div>

@*電影院產品類別*@

<div style="display:block;height:20px;"></div>

@section Scripts
{
    <script>
        const sel = document.getElementById("select1")
        let u1 = document.getElementById("u1")
        let mytab = document.getElementById("mytab")
          /*  < ul id = "u1" class="nav nav-tabs" >*/

         async function LoadTheaters() {
            let response = await fetch("@Url.Content("~/WenShoppingCart/Theater")")
            // console.log(response)
             let datas = await response.json()
             //console.log(datas)
             for (var i = 0; i < datas.length; i++) {
                 //console.log(datas[i]['電影院編號theaterId'])
                 //console.log(datas[i]['電影院名稱theaterName'])
                 const opt = new Option(datas[i]['電影院名稱theaterName'], datas[i]['電影院編號theaterId'])
                 sel.options.add(opt)
             }
        }
        LoadTheaters()      

        sel.addEventListener("change", async () => {

            let intheater = sel.options[sel.selectedIndex].value
            //console.log(intheater)
            let response = await fetch("@Url.Content("~/WenShoppingCart/Category")" + `?theaterId=${intheater}`)
            let DATAS = await response.json()
            //console.log(DATAS)

            for (let i = 0, max = DATAS.length; i < max; i++) {

                const D = DATAS[i]
                Detail = D.byCategory.類別category
                //console.log(D.byCategory.類別category)
            }
            const Frag = document.createDocumentFragment()

            //byCategory 類別category
            for (let i = 0, max = DATAS.length; i < max; i++) {
                const D = DATAS[i]
                //Detail = D.byCategory.類別category
                //console.log(Detail)
                Detail = D.byCategory
                const { 類別category } = Detail
                const ele = document.createElement("li")
                const Aele = document.createElement("a")
                const txt = document.createTextNode(類別category)
                ele.classList.add("nav-item")
                ele.classList.add("myitem" + i)
                Aele.classList.add("nav-linke")
                Aele.classList.add("text-white")
                Aele.classList.add("text-6")               
                //Aele.classList.add("h3")
                Aele.setAttribute("href", "#item" + i)               
                Aele.setAttribute("data-toggle", "tab")
                ele.appendChild(Aele)
                Aele.appendChild(txt)
                Frag.appendChild(ele)
                let myitem = document.getElementsByClassName('myitem' + (i))               
                console.log("click")
                console.log(myitem)
                //myitem.addEventListener("click", async () => {
                //    console.log('click')
                //})
            }
            u1.innerHTML = "";
            u1.appendChild(Frag)

        })


    </script>
}
